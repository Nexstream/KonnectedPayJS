/*** @license
 * Copyright 2016 Nexstream Sdn Bhd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
***/
"use strict";window.KonnectedPay=window.KonnectedPay||{},function(){var e=function(e){var n=function(n){if(null==e[n])throw new Error(n+" is required!")},o=function(n){if(!/^[0-9]+(\.?[0-9]+)$/.test(e[n]))throw new Error(n+" must be a valid number!")};n("merchantId"),n("clientSecret"),n("amount"),n("transId"),n("currencyCode"),n("fullName"),n("email"),n("userId"),o("amount")},n=function(e){for(var n=e.split("&"),o={},r=0;r<n.length;r++){var t=n[r].split("="),a=decodeURIComponent(t[0]);t.length>1?o[a]=decodeURIComponent(t[1]):o[a]=!0}return o},o=function(){var e=location.href.match(/^[^?]+\?([^#]+)/);return e?n(e[1]):{}},r=function(){var e=location.hash;return e?n(e.substr(1)):{}};KonnectedPay.VERSION="0.1.0-alpha",KonnectedPay.requestPayment=function(n,o){e(n);var r="https://pay.appxtream.com/payment?tranId="+encodeURIComponent(n.transId)+"&amount="+encodeURIComponent(n.amount)+"&currencyCode="+encodeURIComponent(n.currencyCode)+"&merchantId="+encodeURIComponent(n.merchantId)+"&device="+encodeURIComponent()+"&os="+encodeURIComponent()+"&returnMethod="+encodeURIComponent(n.responseMethod)+"&fullname="+encodeURIComponent(n.fullName)+"&email="+encodeURIComponent(n.email)+"&userId="+encodeURIComponent(n.userId);null!=n.rememberCard&&(r+="&rememberCard="+(n.rememberCard?"true":"false")),null!=n.returnUrl&&(r+="&return="+encodeURIComponent(n.returnUrl)),null!=n.responseMethod&&(r+="&returnMethod="+encodeURIComponent(n.responseMethod)),"_blank"!=o?location.assign(r):window.open(r,"_blank","menubar=no,toolbar=no,location=no,personalbar=no,directories=no")},KonnectedPay.getPaymentResults=function(e){var n;switch(e.toLowerCase()){case"get":n=o().KonnectedPayResp;break;case"hash":n=r().KonnectedPayResp;break;case"post":throw new Error("Please retrieve POST results on your server");default:throw new Error("Invalid method")}if(!n)return null;try{return JSON.parse(n)}catch(t){throw new Error("Invalid results: "+n)}}}();
